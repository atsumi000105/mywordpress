{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/WP2StaticAJAX.ts","webpack:///external \"jQuery\"","webpack:///./js/wp2static-admin.ts","webpack:///./js/WP2StaticProcessExports.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","jquery_1","wp2staticProcessExports","WP2StaticProcessExports","WP2StaticAJAX","[object Object]","args","statusDescriptions","exportTargets","deployOptions","currentDeploymentMethod","siteInfo","exportAction","statusText","undefined","default","html","val","data","filter","index","element","serialize","ajax","dataType","error","this","ajaxErrorHandler","method","serverResponse","length","shift","doAJAXExport","processExportTargets","url","ajaxurl","failedDeployMessage","hide","prop","jQuery","wp2staticAJAX","formProcessors","description","id","placeholder","website","validationErrors","folder","exportSteps","requiredFields","zip","spinner","JSON","parse","wp2staticString","logFileUrl","uploads_url","selectedFormProcessor","exportCommenceTime","protocolAndDomainRE","localhostDomainRE","nonLocalhostDomainRE","timerIntervalID","crawl_site","post_export_teardown","post_process_archive_dir","$","generateFileListSuccessCallback","text","show","generateFileListFailCallback","sendWP2StaticAJAX","ajaxAction","successCallback","failCallback","success","saveOptionsSuccessCallback","location","reload","saveOptionsFailCallback","saveOptions","downloadExportLogSuccessCallback","downloadExportLogFailCallback","deleteCrawlCacheSuccessCallback","deleteCrawlCacheFailCallback","window","clearInterval","startExportSuccessCallback","updateTimer","runningTime","Date","millis","minutes","Math","floor","seconds","parseFloat","toFixed","millisToMinutesAndSeconds","startExport","setInterval","is","match","everythingAfterProtocol","test","isUrl","keys","forEach","validateEmptyFields","repoField","repo","String","field","split","message","validateRepoField","getValidationErrors","alert","attr","push","clearProgressAndResults","setFormProcessor","fp","formProcessor","websiteLink","document","createElement","setAttribute","innerHTML","setDeploymentMethod","selectedDeploymentMethod","offlineUsageChangeHandler","checkbox","renderSettingsBlock","changeTab","targetTab","tabsContentMapping","add_ons","advanced_settings","automation_settings","caching_settings","crawl_settings","export_logs","form_settings","help_troubleshooting","processing_settings","production_deploy","staging_deploy","url_detection","workflow_tab","each","addClass","blur","removeClass","scrollTop","sendSupportSuccessCallback","sendSupportFailCallback","resetDefaultSettingsSuccessCallback","resetDefaultSettingsFailCallback","deleteDeployCacheSuccessCallback","deleteDeployCacheFailCallback","testDeploymentSuccessCallback","testDeploymentFailCallback","on","evt","preventDefault","Notification","permission","protocol","requestPermission","change","changedCheckbox","exportOptionName","replace","toLowerCase","exportOptionElements","setExportSettingDetailsVisibility","event","currentTarget","click","now","fail","supportRequest","email","postData","confirm","href","button","siblings","fps","opt","append","populateFormProcessorOptions","notices","hasClass","hideOtherVendorMessages","zipURL","baseUrl","focus"],"mappings":"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","file":"wp2static-admin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","declare var ajaxurl: string;\n\nimport $ from \"jquery\";\n\nimport { WP2StaticProcessExports } from \"./WP2StaticProcessExports\";\n\nconst wp2staticProcessExports = new WP2StaticProcessExports();\n\nexport class WP2StaticAJAX {\n\n    statusText: string;\n\n    /*\n        doAJAXExport() can handle from 1 to n actions\n        each action runs, with 3 possible results:\n        SUCCESS - action is complete\n        > 0 - action is in progress inremental task\n        ERROR\n\n        if an action is successful, and there are other actions queued up,\n        it will call the function again with the remaining arguments/actions\n\n        if an action is succesful, and there are no other actions queued,\n        it will call processExportTargets() to continue any other exports\n\n        if an action is in progress incremental, it will call itself again,\n        with all the same arguments\n\n        if an action fails, ajaxErrorHandler() is called\n        */\n      doAJAXExport(\n        args,\n        statusDescriptions,\n        exportTargets,\n        deployOptions,\n        currentDeploymentMethod,\n        siteInfo\n      ) {\n        let exportAction = args[0];\n        let statusText = exportAction;\n\n        if (statusDescriptions[exportAction] !== undefined) {\n          statusText = statusDescriptions[exportAction];\n        } else {\n          statusText = exportAction;\n        }\n\n        $(\"#current_action\").html(statusText);\n        $(\".hiddenActionField\").val(\"wp_static_html_output_ajax\");\n        $(\"#hiddenAJAXAction\").val(exportAction);\n\n        const data = $(\".options-form :input\")\n          .filter(\n            (index, element) => {\n              return $(element).val() !== \"\";\n            },\n          )\n          .serialize();\n\n        $.ajax(\n          {\n            data,\n            dataType: \"html\",\n            error: this.ajaxErrorHandler,\n            method: \"POST\",\n            success(serverResponse) {\n              // if an action is successful, and there are other actions queued up\n              if (serverResponse === \"SUCCESS\" && args.length > 1) {\n                // rm first action now that it's succeeded\n                args.shift();\n                // call function with all other actions\n                this.doAJAXExport(args, statusDescriptions, exportTargets, deployOptions, siteInfo);\n                // if an action is in progress incremental, it will call itself again\n              } else if (serverResponse > 0) {\n                this.doAJAXExport(args, statusDescriptions, exportTargets, deployOptions, siteInfo);\n              } else if (serverResponse === \"SUCCESS\") {\n                // not an incremental action, continue on with export targets\n                wp2staticProcessExports.processExportTargets(\n                  statusDescriptions,\n                  exportTargets,\n                  deployOptions,\n                  currentDeploymentMethod,\n                  siteInfo\n                );\n              } else {\n                this.ajaxErrorHandler();\n              }\n            },\n            url: ajaxurl,\n          },\n        );\n    }\n\n    ajaxErrorHandler() {\n      // stopTimer();\n\n      const failedDeployMessage = 'Failed during \"' + this.statusText +\n              '\", <button id=\"downloadExportLogButton\">Download export log</button>';\n\n      $(\"#current_action\").html(failedDeployMessage);\n      $(\".pulsate-css\").hide();\n      $(\"#startExportButton\").prop(\"disabled\", false);\n      $(\".saveSettingsButton\").prop(\"disabled\", false);\n      $(\".resetDefaultSettingsButton\").prop(\"disabled\", false);\n      $(\".cancelExportButton\").hide();\n    }\n}\n","module.exports = jQuery;","declare var wp2staticString: any;\ndeclare var ajaxurl: string;\nimport $ from \"jquery\";\nimport { WP2StaticAJAX } from \"./WP2StaticAJAX\";\n\nconst wp2staticAJAX = new WP2StaticAJAX();\n\ninterface FormProcessor {\n    id: string;\n    name: string;\n    placeholder: string;\n    website: string;\n    description: string;\n}\n\nconst formProcessors: FormProcessor[] = [\n  {\n    description: \"Basin does stuff\",\n    id: \"basin\",\n    name: \"Basin\",\n    placeholder: \"https://usebasin.com/f/\",\n    website: \"https://usebasin.com\",\n  },\n  {\n    description: `FormSpree is very simple to start with, just set your\n endpoint, including your email address and start sending.`,\n    id: \"formspree\",\n    name: \"Formspree\",\n    placeholder: \"https://formspree.io/myemail@domain.com\",\n    website: \"https://formspree.io\",\n  },\n  {\n    description: \"Zapier does stuff\",\n    id: \"zapier\",\n    name: \"Zapier\",\n    placeholder: \"https://hooks.zapier.com/hooks/catch/4977245/jqj3l4/\",\n    website: \"https://zapier.com\",\n  },\n  {\n    description: \"Formkeep does stuff\",\n    id: \"formkeep\",\n    name: \"FormKeep\",\n    placeholder: \"https://formkeep.com/f/5dd8de73ce2c\",\n    website: \"https://formkeep.com\",\n  },\n  {\n    description: \"Use any custom endpoint\",\n    id: \"custom\",\n    name: \"Custom endpoint\",\n    placeholder: \"https://mycustomendpoint.com/SOMEPATH\",\n    website: \"https://docs.wp2static.com\",\n  },\n];\n\nlet validationErrors = \"\";\nconst deployOptions = {\n  folder: {\n    exportSteps: [\n      \"finalize_deployment\",\n    ],\n    requiredFields: {\n    },\n  },\n  zip: {\n    exportSteps: [\n      \"finalize_deployment\",\n    ],\n    requiredFields: {\n    },\n  },\n};\n\nlet spinner;\nconst siteInfo = JSON.parse(wp2staticString.siteInfo);\nlet currentDeploymentMethod;\nif (wp2staticString.currentDeploymentMethod) {\n  currentDeploymentMethod = wp2staticString.currentDeploymentMethod;\n} else {\n  currentDeploymentMethod = \"folder\";\n}\n\n// TODO: get the log out of the archive, along with it's meta infos\nconst logFileUrl = siteInfo.uploads_url + \"wp2static-working-files/EXPORT-LOG.txt\";\nconst selectedFormProcessor = \"\";\nconst exportAction = \"\";\nlet exportTargets = [];\nlet exportCommenceTime: number = 0;\nlet statusText = \"\";\nconst protocolAndDomainRE = /^(?:\\w+:)?\\/\\/(\\S+)$/;\nconst localhostDomainRE = /^localhost[:?\\d]*(?:[^:?\\d]\\S*)?$/;\nconst nonLocalhostDomainRE = /^[^\\s.]+\\.\\S{2,}$/;\nlet timerIntervalID: number = 0;\nconst statusDescriptions = {\n  crawl_site: \"Crawling initial file list\",\n  post_export_teardown: \"Cleaning up after processing\",\n  post_process_archive_dir: \"Processing the crawled files\",\n};\n\n// ignore shadowing warning for $\n/* tslint:disable */\njQuery(($) => {\n/* tslint:enable */\n    function generateFileListSuccessCallback(serverResponse) {\n      if (!serverResponse) {\n        $(\"#current_action\").html(`Failed to generate initial file list.\n Please <a href=\"https://docs.wp2static.com\" target=\"_blank\">contact support</a>`);\n        $(\".pulsate-css\").hide();\n      } else {\n        $(\"#initial_crawl_list_loader\").hide();\n        $(\"#initial_crawl_list_count\").text(`${serverResponse} URLs were\n detected on your site that will be used to initiate the crawl.\n Other URLs will be discovered while crawling.`);\n        $(\"#preview_initial_crawl_list_button\").show();\n\n        $(\"#startExportButton\").prop(\"disabled\", false);\n        $(\".saveSettingsButton\").prop(\"disabled\", false);\n        $(\".resetDefaultSettingsButton\").prop(\"disabled\", false);\n        $(\"#current_action\").html(`${serverResponse} URLs were detected for\n initial crawl list. <a href=\"#\" id=\"GoToDetectionTabButton\">Adjust detection\n via the URL Detection tab.</a>`);\n        $(\".pulsate-css\").hide();\n      }\n    }\n\n    function generateFileListFailCallback(serverResponse) {\n      const failedDeployMessage = `Failed to generate Initial Crawl List.\n Please check your permissions to the WordPress upload directory or check your\n Export Log in case of more info.`;\n\n      $(\"#current_action\").html(failedDeployMessage);\n      $(\".pulsate-css\").hide();\n      $(\"#startExportButton\").prop(\"disabled\", true);\n      $(\".saveSettingsButton\").prop(\"disabled\", false);\n      $(\".resetDefaultSettingsButton\").prop(\"disabled\", false);\n      $(\".cancelExportButton\").hide();\n      $(\"#initial_crawl_list_loader\").hide();\n    }\n\n    function prepareInitialFileList() {\n      statusText = \"Analyzing site... this may take a few minutes (but it's worth it!)\";\n      $(\"#current_action\").html(statusText);\n\n      sendWP2StaticAJAX(\n        \"generate_filelist_preview\",\n        generateFileListSuccessCallback,\n        generateFileListFailCallback,\n      );\n    }\n\n    function sendWP2StaticAJAX(ajaxAction, successCallback, failCallback) {\n      $(\".hiddenActionField\").val(\"wp_static_html_output_ajax\");\n      $(\"#hiddenAJAXAction\").val(ajaxAction);\n      $(\"#progress\").show();\n      $(\".pulsate-css\").show();\n\n      const data = $(\".options-form :input\")\n        .filter(\n          (index, element) => {\n            return $(element).val() !== \"\";\n          },\n        )\n        .serialize();\n\n      $.ajax(\n        {\n          data,\n          dataType: \"html\",\n          error: failCallback,\n          method: \"POST\",\n          success: successCallback,\n          url: ajaxurl,\n        },\n      );\n    }\n\n    function saveOptionsSuccessCallback(serverResponse) {\n      $(\"#progress\").hide();\n\n      location.reload();\n    }\n\n    function saveOptionsFailCallback(serverResponse) {\n      $(\"#progress\").hide();\n\n      location.reload();\n    }\n\n    function saveOptions() {\n      $(\"#current_action\").html(\"Saving options\");\n      sendWP2StaticAJAX(\n        \"save_options\",\n        saveOptionsSuccessCallback,\n        saveOptionsFailCallback,\n      );\n    }\n\n    function millisToMinutesAndSeconds(millis) {\n      const minutes = Math.floor(millis / 60000);\n      const seconds: number = parseFloat( ((millis % 60000) / 1000).toFixed(0) );\n      return minutes + \":\" + (seconds < 10 ? \"0\" : \"\") + seconds;\n    }\n\n\n    function downloadExportLogSuccessCallback(serverResponse) {\n      if (!serverResponse) {\n        $(\"#current_action\").html(`Failed to download Export Log\n <a id=\"downloadExportLogButton\" href=\"#\">try again</a>`);\n        $(\".pulsate-css\").hide();\n      } else {\n        $(\"#current_action\").html(`Download <a href=\"${serverResponse}\">\n ${serverResponse}/a>`);\n        $(\".pulsate-css\").hide();\n      }\n    }\n\n    function downloadExportLogFailCallback(serverResponse) {\n      $(\".pulsate-css\").hide();\n      $(\"#current_action\").html(`Failed to download Export Log\n <a id=\"downloadExportLogButton\" href=\"#\">try again</a>`);\n    }\n\n    function deleteCrawlCacheSuccessCallback(serverResponse) {\n      if (!serverResponse) {\n        $(\".pulsate-css\").hide();\n        $(\"#current_action\").html(\"Failed to delete Crawl Cache.\");\n      } else {\n        $(\"#current_action\").html(\"Crawl Cache successfully deleted.\");\n        $(\".pulsate-css\").hide();\n      }\n    }\n\n    function deleteCrawlCacheFailCallback(serverResponse) {\n      $(\".pulsate-css\").hide();\n      $(\"#current_action\").html(\"Failed to delete Crawl Cache.\");\n    }\n\n    function downloadExportLog() {\n      $(\"#current_action\").html(\"Downloading Export Log...\");\n\n      sendWP2StaticAJAX(\n        \"download_export_log\",\n        downloadExportLogSuccessCallback,\n        downloadExportLogFailCallback,\n      );\n    }\n\n    $(document).on(\n      \"click\",\n      \"#detectEverythingButton\",\n      (evt) => {\n        evt.preventDefault();\n        $('#detectionOptionsTable input[type=\"checkbox\"]').attr(\"checked\", 1);\n      },\n    );\n\n    $(document).on(\n      \"click\",\n      \"#deleteCrawlCache\",\n      (evt) => {\n        evt.preventDefault();\n        $(\"#current_action\").html(\"Deleting Crawl Cache...\");\n\n        sendWP2StaticAJAX(\n          \"delete_crawl_cache\",\n          deleteCrawlCacheSuccessCallback,\n          deleteCrawlCacheFailCallback,\n        );\n      },\n    );\n\n    $(document).on(\n      \"click\",\n      \"#detectNothingButton\",\n      (evt) => {\n        evt.preventDefault();\n        $('#detectionOptionsTable input[type=\"checkbox\"]').attr(\"checked\", 0);\n      },\n    );\n\n    $(document).on(\n      \"click\",\n      \"#downloadExportLogButton\",\n      (evt) => {\n        evt.preventDefault();\n        downloadExportLog();\n      },\n    );\n\n    function ajaxErrorHandler() {\n      stopTimer();\n\n      const failedDeployMessage = 'Failed during \"' + statusText +\n              '\", <button id=\"downloadExportLogButton\">Download export log</button>';\n\n      $(\"#current_action\").html(failedDeployMessage);\n      $(\".pulsate-css\").hide();\n      $(\"#startExportButton\").prop(\"disabled\", false);\n      $(\".saveSettingsButton\").prop(\"disabled\", false);\n      $(\".resetDefaultSettingsButton\").prop(\"disabled\", false);\n      $(\".cancelExportButton\").hide();\n    }\n\n    function startExportSuccessCallback(serverResponse) {\n      const initialSteps = [\n        \"crawl_site\",\n        \"post_process_archive_dir\",\n      ];\n\n      wp2staticAJAX.doAJAXExport(\n        initialSteps,\n        statusDescriptions,\n        exportTargets,\n        deployOptions,\n        currentDeploymentMethod,\n        siteInfo\n      );\n    }\n\n    function startTimer() {\n      timerIntervalID = window.setInterval(updateTimer, 1000);\n    }\n\n    function stopTimer() {\n      window.clearInterval(timerIntervalID);\n    }\n\n    function updateTimer() {\n      const exportCompleteTime = +new Date();\n      const runningTime = exportCompleteTime - exportCommenceTime;\n\n      $(\"#export_timer\").html(\n        \"<b>Export duration: </b>\" + millisToMinutesAndSeconds(runningTime),\n      );\n    }\n\n    function startExport() {\n      // start timer\n      exportCommenceTime = +new Date();\n      startTimer();\n\n      // startPolling();\n\n      validationErrors = getValidationErrors();\n\n      if (validationErrors !== \"\") {\n        alert(validationErrors);\n\n        // TODO: place in function that resets any in progress counters, etc\n        $(\"#progress\").hide();\n        $(\"#startExportButton\").prop(\"disabled\", false);\n        $(\".saveSettingsButton\").prop(\"disabled\", false);\n        $(\".resetDefaultSettingsButton\").prop(\"disabled\", false);\n        $(\".cancelExportButton\").hide();\n\n        return false;\n      }\n\n      $(\"#current_action\").html(\"Starting export...\");\n\n      // reset export targets to avoid having left-overs from a failed run\n      exportTargets = [];\n\n      if (currentDeploymentMethod === \"zip\") {\n        $(\"#createZip\").attr(\"checked\", \"checked\");\n      }\n      exportTargets.push(currentDeploymentMethod);\n\n      sendWP2StaticAJAX(\n        \"prepare_for_export\",\n        startExportSuccessCallback,\n        ajaxErrorHandler,\n      );\n    }\n\n    function clearProgressAndResults() {\n      $(\"#downloadZIP\").hide();\n      $(\"#goToMyStaticSite\").hide();\n      $(\"#exportDuration\").hide();\n    }\n\n    function getValidationErrors() {\n      // check for when targetFolder is showing (plugin reset state)\n      if ($(\"#targetFolder\").is(\":visible\") &&\n            ($(\"#targetFolder\").val() === \"\")) {\n        validationErrors += \"Target folder may not be empty. Please adjust your settings.\";\n      }\n\n      if (($(\"#baseUrl\").val() === undefined ||\n            $(\"#baseUrl\").val() === \"\") &&\n            !$(\"#allowOfflineUsage\").is(\":checked\")) {\n        validationErrors += \"Please set the Base URL field to the address you will host your static site.\\n\";\n      }\n\n      // TODO: on new Debian package-managed environment, this was falsely erroring\n      if (!isUrl($(\"#baseUrl\").val()) && !$(\"#allowOfflineUsage\").is(\":checked\")) {\n        // TODO: testing / URL as base\n        if ($(\"#baseUrl\").val() !== \"/\") {\n          validationErrors += \"Please set the Base URL field to a valid URL, ie http://mystaticsite.com.\\n\";\n        }\n      }\n\n      const requiredFields =\n            deployOptions[currentDeploymentMethod].requiredFields;\n\n      if (requiredFields) {\n        validateEmptyFields(requiredFields);\n      }\n\n      const repoField = deployOptions[currentDeploymentMethod].repoField;\n\n      if (repoField) {\n        validateRepoField(repoField);\n      }\n\n      return validationErrors;\n    }\n\n    function validateRepoField(repoField) {\n      const repo: string = String($(\"#\" + repoField.field + \"\").val());\n\n      if (repo !== \"\") {\n        if (repo.split(\"/\").length !== 2) {\n          validationErrors += repoField.message;\n        }\n      }\n    }\n\n    function validateEmptyFields(requiredFields) {\n      Object.keys(requiredFields).forEach(\n        (key, index) => {\n          if ($(\"#\" + key).val() === \"\") {\n            validationErrors += requiredFields[key] + \"\\n\";\n          }\n        },\n      );\n    }\n\n    function isUrl(url) {\n      if (typeof url !== \"string\") {\n        return false;\n      }\n\n      const match = url.match(protocolAndDomainRE);\n\n      if (!match) {\n        return false;\n      }\n\n      const everythingAfterProtocol = match[1];\n\n      if (!everythingAfterProtocol) {\n        return false;\n      }\n\n      if (localhostDomainRE.test(everythingAfterProtocol) ||\n            nonLocalhostDomainRE.test(everythingAfterProtocol)) {\n        return true;\n      }\n\n      return false;\n    }\n\n    function hideOtherVendorMessages() {\n      const notices = $(\".update-nag, .updated, .error, .is-dismissible, .elementor-message\");\n\n      $.each(\n        notices,\n        (index, element) => {\n          if (!$(element).hasClass(\"wp2static-notice\")) {\n            $(element).hide();\n          }\n        },\n      );\n    }\n\n    function setFormProcessor(fp: any) {\n      if (fp in formProcessors) {\n\n        const formProcessor: FormProcessor = formProcessors[selectedFormProcessor];\n\n        $(\"#form_processor_description\").text(formProcessor.description);\n\n        const website = formProcessor.website;\n\n        const websiteLink: HTMLAnchorElement  = document.createElement(\"a\");\n        websiteLink.setAttribute(\"href\", website);\n        websiteLink.innerHTML = \"Visit \" + formProcessor.name;\n\n        $(\"#form_processor_website\").html(websiteLink);\n        $(\"#form_processor_endpoint\").attr(\"placeholder\", formProcessor.placeholder);\n      } else {\n        $(\"#form_processor_description\").text(\"\");\n        $(\"#form_processor_website\").html(\"\");\n        $(\"#form_processor_endpoint\").attr(\"placeholder\", \"Form endpoint\");\n      }\n    }\n\n    function populateFormProcessorOptions(fps: FormProcessor[]) {\n      fps.forEach( (formProcessor) => {\n        const opt = $(\"<option>\").val(formProcessor.id).text(formProcessor.name);\n        $(\"#form_processor_select\").append(opt);\n      });\n    }\n\n    /*\n        TODO: quick win to get the select menu options to behave like the sendViaFTP, etc checkboxes\n        */\n    // TODO: remove this completely?\n    function setDeploymentMethod(selectedDeploymentMethod) {\n      // hide zip dl link for all\n      $(\"#downloadZIP\").hide();\n      currentDeploymentMethod = selectedDeploymentMethod;\n\n      // set the selected option in case calling this from outside the event handler\n      $(\".selected_deployment_method\").val(selectedDeploymentMethod);\n    }\n\n    function offlineUsageChangeHandler(checkbox) {\n      if ($(checkbox).is(\":checked\")) {\n        $(\"#baseUrl-zip\").prop(\"disabled\", true);\n      } else {\n        $(\"#baseUrl-zip\").prop(\"disabled\", false);\n      }\n    }\n\n    function setExportSettingDetailsVisibility(changedCheckbox) {\n      const checkboxName = $(changedCheckbox).attr(\"name\");\n      const exportOptionName = checkboxName.replace(\"sendVia\", \"\").toLowerCase();\n      const exportOptionElements = $(\".\" + exportOptionName);\n\n      if ($(changedCheckbox).is(\":checked\")) {\n        exportOptionElements.show();\n        // unhide all the inputs, the following span and the following br\n      } else {\n        // hide all the inputs, the following span and the following br\n        exportOptionElements.hide();\n      }\n    }\n\n    /*\n        render the information and settings blocks based on the deployment method selected\n        */\n    function renderSettingsBlock(selectedDeploymentMethod) {\n      // hide non-active deployment methods\n      $('[class$=\"_settings_block\"]').hide();\n      // hide those not selected\n      $(\".\" + selectedDeploymentMethod + \"_settings_block\").show();\n    }\n\n    function notifyMe() {\n      if (!Notification) {\n        alert(\"All exports are complete!.\");\n        return;\n      }\n\n      if (window.location.protocol === \"https:\") {\n        if (Notification.permission !== \"granted\") {\n          Notification.requestPermission();\n        } else {\n          const notification = new Notification(\n            \"WP Static HTML Export\",\n            {\n              body: \"Exports have finished!\",\n              icon: `https://upload.wikimedia.org/wikipedia/commons/thumb/6/68/\nWordpress_Shiny_Icon.svg/768px-Wordpress_Shiny_Icon.svg.png`,\n            },\n          );\n\n          notification.onclick = function() {\n            parent.focus();\n            window.focus();\n            this.close();\n          };\n        }\n      }\n    }\n\n    function loadLogFile() {\n      // display loading icon\n      $(\"#log_load_progress\").show();\n\n      $(\"#export_log_textarea\").attr(\"disabled\", 1);\n\n      // set textarea content to 'Loading log file...'\n      $(\"#export_log_textarea\").html(\"Loading log file...\");\n\n      // load the log file\n      $.get(\n        logFileUrl + \"?cacheBuster=\" + Date.now(),\n        (data) => {\n          // hide loading icon\n          $(\"#log_load_progress\").hide();\n\n          // set textarea to enabled\n          $(\"#export_log_textarea\").attr(\"disabled\", 0);\n\n          // set textarea content\n          $(\"#export_log_textarea\").html(data);\n        },\n      ).fail(\n        () => {\n          $(\"#log_load_progress\").hide();\n\n          // set textarea to enabled\n          $(\"#export_log_textarea\").attr(\"disabled\", 0);\n\n          // set textarea content\n          $(\"#export_log_textarea\").html(\"Requested log file not found\");\n        },\n      );\n    }\n\n    if (Notification.permission !== \"granted\") {\n      if (window.location.protocol === \"https:\") {\n        Notification.requestPermission();\n      }\n    }\n\n    $('input[type=\"checkbox\"]').change(\n      () => {\n        setExportSettingDetailsVisibility(this);\n      },\n    );\n\n    // disable zip base url field when offline usage is checked\n    $(\"#allowOfflineUsage\").change(\n      () => {\n        offlineUsageChangeHandler($(this));\n      },\n    );\n\n    // handler when form processor is changed\n    $(\"#form_processor_select\").change(\n      (event) => {\n        setFormProcessor((event.currentTarget as HTMLInputElement).value);\n      },\n    );\n\n    // handler when deployment method is changed\n    $(\".selected_deployment_method\").change(\n      (event) => {\n        renderSettingsBlock((event.currentTarget as HTMLInputElement).value);\n        setDeploymentMethod((event.currentTarget as HTMLInputElement).value);\n        clearProgressAndResults();\n      },\n    );\n\n    // handler when log selector is changed\n    $(\"#reload_log_button\").click(\n      () => {\n        loadLogFile();\n      },\n    );\n\n    function changeTab(targetTab: string) {\n      const tabsContentMapping = {\n        add_ons: \"Add-ons\",\n        advanced_settings: \"Advanced Options\",\n        automation_settings: \"Automation\",\n        caching_settings: \"Caching\",\n        crawl_settings: \"Crawling\",\n        export_logs: \"Logs\",\n        form_settings: \"Forms\",\n        help_troubleshooting: \"Help\",\n        processing_settings: \"Processing\",\n        production_deploy: \"Production\",\n        staging_deploy: \"Staging\",\n        url_detection: \"URL Detection\",\n        workflow_tab: \"Workflow\",\n      };\n\n      // switch the active tab\n      $.each(\n        $(\".nav-tab\"),\n        (index, element) => {\n          if ($(element).text() === targetTab) {\n            $(element).addClass(\"nav-tab-active\");\n            $(element).blur();\n          } else {\n            $(element).removeClass(\"nav-tab-active\");\n          }\n        },\n      );\n\n      // hide/show the tab content\n      for (const key in tabsContentMapping) {\n        if (tabsContentMapping.hasOwnProperty(key)) {\n          if (tabsContentMapping[key] === targetTab) {\n            $(\".\" + key).show();\n            $(\"html, body\").scrollTop(0);\n          } else {\n            $(\".\" + key).hide();\n          }\n        }\n      }\n    }\n\n    $(document).on(\n      \"click\",\n      \"#GoToDetectionTabButton\",\n      (evt) => {\n        evt.preventDefault();\n        changeTab(\"URL Detection\");\n      },\n    );\n\n    $(document).on(\n      \"click\",\n      \"#GoToDeployTabButton,#GoToDeployTabLink\",\n      (evt) => {\n        evt.preventDefault();\n        changeTab(\"Deployment\");\n      },\n    );\n\n    // TODO: create action for #GenerateZIPOfflineUse\n    // and #GenerateZIPDeployAnywhere\n\n    $(document).on(\n      \"click\",\n      \"#GoToAdvancedTabButton\",\n      (evt) => {\n        evt.preventDefault();\n        changeTab(\"Advanced Options\");\n      },\n    );\n\n    $(document).on(\n      \"click\",\n      \".nav-tab\",\n      (evt) => {\n        evt.preventDefault();\n        changeTab($(evt.currentTarget).text());\n      },\n    );\n\n    $(document).on(\n      \"submit\",\n      \"#general-options\",\n      (evt) => {\n        evt.preventDefault();\n      },\n    );\n\n    $(document).on(\n      \"click\",\n      \"#send_supportRequest\",\n      (evt) => {\n        evt.preventDefault();\n\n        let supportRequest = $(\"#supportRequestContent\").val();\n\n        if ($(\"#supportRequestIncludeLog\").is(\":checked\")) {\n          $.get(\n            logFileUrl,\n            (data) => {\n              supportRequest += \"#### EXPORT LOG ###\";\n              supportRequest += data;\n\n              data = {\n                email: $(\"#supportRequestEmail\").val(),\n                supportRequest,\n              };\n\n              $.ajax(\n                {\n                  data,\n                  dataType: \"html\",\n                  error: sendSupportFailCallback,\n                  method: \"POST\",\n                  success: sendSupportSuccessCallback,\n                  url: \"https://hooks.zapier.com/hooks/catch/4977245/jqj3l4/\",\n                },\n              );\n            },\n          );\n        }\n\n        const postData = {\n          email: $(\"#supportRequestEmail\").val(),\n          supportRequest,\n        };\n\n        $.ajax(\n          {\n            data: postData,\n            dataType: \"html\",\n            error: sendSupportFailCallback,\n            method: \"POST\",\n            success: sendSupportSuccessCallback,\n            url: \"https://hooks.zapier.com/hooks/catch/4977245/jqj3l4/\",\n          },\n        );\n      },\n    );\n\n    $(\"#startExportButton\").click(\n      () => {\n        clearProgressAndResults();\n        $(this).prop(\"disabled\", true);\n        $(\".saveSettingsButton\").prop(\"disabled\", true);\n        $(\".resetDefaultSettingsButton\").prop(\"disabled\", true);\n        $(\".cancelExportButton\").show();\n        startExport();\n      },\n    );\n\n    $(\".cancelExportButton\").click(\n      () => {\n        const reallyCancel = confirm(\"Stop current export and reload page?\");\n        if (reallyCancel) {\n          window.location.href = window.location.href;\n        }\n      },\n    );\n\n    function sendSupportSuccessCallback(serverResponse) {\n      alert(\"Successful support request sent\");\n    }\n\n    function sendSupportFailCallback(serverResponse) {\n      alert(\"Failed to send support request. Please try again or contact help@wp2static.com.\");\n    }\n\n    function resetDefaultSettingsSuccessCallback(serverResponse) {\n      alert(\"Settings have been reset to default, the page will now be reloaded.\");\n      window.location.reload(true);\n    }\n\n    function resetDefaultSettingsFailCallback(serverResponse) {\n      alert(\"Error encountered in trying to reset settings. Please try refreshing the page.\");\n    }\n\n    $(\"#wp2static-footer\").on(\n      \"click\",\n      \".resetDefaultSettingsButton\",\n      (event) => {\n        event.preventDefault();\n\n        sendWP2StaticAJAX(\n          \"reset_default_settings\",\n          resetDefaultSettingsSuccessCallback,\n          resetDefaultSettingsFailCallback,\n        );\n      },\n    );\n\n    $(\"#wp2static-footer\").on(\n      \"click\",\n      \".saveSettingsButton\",\n      (event) => {\n        event.preventDefault();\n        saveOptions();\n      },\n    );\n\n    function deleteDeployCacheSuccessCallback(serverResponse) {\n      if (serverResponse === \"SUCCESS\") {\n        alert(\"Deploy cache cleared\");\n      } else {\n        alert(\"FAIL: Unable to delete deploy cache\");\n      }\n\n      spinner.hide();\n      $(\".pulsate-css\").hide();\n    }\n\n    function deleteDeployCacheFailCallback(serverResponse) {\n      alert(\"FAIL: Unable to delete deploy cache\");\n\n      spinner.hide();\n      $(\".pulsate-css\").hide();\n    }\n\n    $(\".wrap\").on(\n      \"click\",\n      \"#delete_deploy_cache_button\",\n      (event) => {\n        event.preventDefault();\n        const button = event.currentTarget;\n        spinner = $(button).siblings(\"div.spinner\");\n        spinner.show();\n        sendWP2StaticAJAX(\n          \"delete_deploy_cache\",\n          deleteDeployCacheSuccessCallback,\n          deleteDeployCacheFailCallback,\n        );\n      },\n    );\n\n    function testDeploymentSuccessCallback(serverResponse) {\n      if (serverResponse === \"SUCCESS\") {\n        alert(\"Connection/Upload Test Successful\");\n      } else {\n        alert(\"FAIL: Unable to complete test upload to \" + currentDeploymentMethod);\n      }\n\n      spinner.hide();\n      $(\".pulsate-css\").hide();\n    }\n\n    function testDeploymentFailCallback(serverResponse) {\n      alert(\"FAIL: Unable to complete test upload to \" + currentDeploymentMethod);\n      spinner.hide();\n      $(\".pulsate-css\").hide();\n    }\n\n    $(\".wrap\").on(\n      \"click\",\n      '[id$=\"-test-button\"]',\n      (event) => {\n        event.preventDefault();\n        spinner = $(\"button\").siblings(\"div.spinner\");\n        spinner.show();\n\n        sendWP2StaticAJAX(\n          \"test_\" + currentDeploymentMethod,\n          testDeploymentSuccessCallback,\n          testDeploymentFailCallback,\n        );\n      },\n    );\n\n    $(\".wrap\").on(\n      \"click\",\n      \"#save-and-reload\",\n      (event) => {\n        event.preventDefault();\n        saveOptions();\n      },\n    );\n\n    $(\".spinner\").hide();\n\n    // guard against selected option for add-on not currently activated\n    if ($(\"#baseUrl-\" + currentDeploymentMethod).val() === undefined) {\n      currentDeploymentMethod = \"folder\";\n    }\n\n    populateFormProcessorOptions(formProcessors);\n\n    setFormProcessor(selectedFormProcessor);\n\n    // call change handler on page load, to set correct state\n    offlineUsageChangeHandler($(\"#allowOfflineUsage\"));\n\n    // set and show the previous selected deployment method\n    renderSettingsBlock(currentDeploymentMethod);\n\n    // set the select to the current deployment type\n    setDeploymentMethod(currentDeploymentMethod);\n\n    // hide all but WP2Static messages\n    hideOtherVendorMessages();\n\n    prepareInitialFileList();\n  },\n);\n","import $ from \"jquery\";\n\nimport { WP2StaticAJAX } from \"./WP2StaticAJAX\";\n\nconst wp2staticAJAX = new WP2StaticAJAX();\n\nexport class WP2StaticProcessExports {\n\n  processExportTargets(\n    statusDescriptions,\n    exportTargets,\n    deployOptions,\n    currentDeploymentMethod,\n    siteInfo\n  ) {\n\n    if (exportTargets.length > 0) {\n      const target = exportTargets.shift();\n      const exportSteps = deployOptions[target].exportSteps;\n\n      wp2staticAJAX.doAJAXExport(\n        exportSteps,\n        statusDescriptions,\n        exportTargets,\n        deployOptions,\n        currentDeploymentMethod,\n        siteInfo\n      );\n    } else {\n      // if zip was selected, call to get zip name and enable the button with the link to download\n      if (currentDeploymentMethod === \"zip\") {\n        const zipURL = siteInfo.uploads_url + \"wp2static-exported-site.zip?cacheBuster=\" + Date.now();\n        $(\"#downloadZIP\").attr(\"href\", zipURL);\n        $(\"#downloadZIP\").show();\n      } else {\n        // for other methods, show the Go to my static site link\n        const baseUrl = String($(\"#baseUrl\").val());\n        $(\"#goToMyStaticSite\").attr(\"href\", baseUrl);\n        $(\"#goToMyStaticSite\").show();\n      }\n\n      // all complete\n      // const exportCompleteTime: number = +new Date();\n      // const exportDuration = exportCompleteTime - exportCommenceTime;\n\n      // clear export commence time for next run\n      // exportCommenceTime = 0;\n\n      // stopTimer();\n      // $(\"#current_action\").text(`Process completed in\n//${millisToMinutesAndSeconds(exportDuration)} (mins:ss)`);\n      $(\"#goToMyStaticSite\").focus();\n      $(\".pulsate-css\").hide();\n      $(\"#startExportButton\").prop(\"disabled\", false);\n      $(\".saveSettingsButton\").prop(\"disabled\", false);\n      $(\".resetDefaultSettingsButton\").prop(\"disabled\", false);\n      $(\".cancelExportButton\").hide();\n      // notifyMe();\n    }\n  }\n}\n"],"sourceRoot":""}